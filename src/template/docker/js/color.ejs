<script>
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.querySelector('html').setAttribute('style', 'color-scheme: dark;');
    }

    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        const newColorScheme = event.matches ? "dark" : "light";

        if(newColorScheme === 'light') {
            document.querySelector('html').removeAttribute('style');
        } else {
            document.querySelector('html').setAttribute('style', 'color-scheme: dark;');
        }
    });
</script>
